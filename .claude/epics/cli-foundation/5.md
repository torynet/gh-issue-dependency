---
name: Implement layered error handling system
status: open
created: 2025-09-06T21:03:23Z
updated: 2025-09-06T21:14:30Z
github: https://github.com/torynet/gh-issue-dependency/issues/5
depends_on: [4]
parallel: true
conflicts_with: []
---

# Task: Implement layered error handling system

## Description
Implement the layered error handling system following gh-sub-issue patterns. Create error wrapping, context addition, and user-friendly message conversion that categorizes errors and provides actionable guidance.

## Acceptance Criteria
- [ ] pkg/errors.go created with error handling utilities
- [ ] Layered error wrapping with context at each level (API, validation, business logic)
- [ ] Error categorization: authentication, permission, network, validation errors
- [ ] User-friendly error message conversion with actionable guidance
- [ ] Consistent error message formatting across all commands
- [ ] Error recovery suggestions for common scenarios
- [ ] Integration with existing command structure

## Technical Details
- **Implementation approach**: Replicate gh-sub-issue error handling patterns exactly
- **Key considerations**: Context wrapping, error categorization, user-friendly messages
- **Code locations**: pkg/errors.go, potentially pkg/github.go for API errors

Error categories to handle:
- **Authentication**: "Run 'gh auth login' first"
- **Permission**: "Insufficient permissions to access OWNER/REPO"
- **Network**: "Network error, please check connection and retry"
- **Validation**: "Invalid issue number format: X (expected number or GitHub URL)"
- **API**: Rate limiting, resource not found, etc.

Key patterns to implement:
```go
func WrapAuthError(err error) error {
    return fmt.Errorf("authentication required: %w\nRun 'gh auth login' to authenticate", err)
}

func WrapValidationError(field, value string, err error) error {
    return fmt.Errorf("invalid %s: %s: %w", field, value, err)
}
```

## Dependencies
- [ ] Task 003 completed (command structure exists)
- [ ] Understanding of gh-sub-issue error handling patterns
- [ ] Go error wrapping best practices

## Effort Estimate
- Size: M
- Hours: 2-3 hours
- Parallel: true (can work alongside repository detection)

## Definition of Done
- [ ] Error handling utilities implemented in pkg/errors.go
- [ ] Integration tests show proper error categorization
- [ ] Error messages are user-friendly with actionable guidance
- [ ] All error types have appropriate recovery suggestions
- [ ] Code follows gh-sub-issue error handling patterns
- [ ] Error handling is consistent across command structure
