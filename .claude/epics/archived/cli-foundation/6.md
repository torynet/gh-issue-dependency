---
name: Implement GitHub repository context detection
status: open
created: 2025-09-06T21:03:23Z
updated: 2025-09-06T21:14:30Z
github: https://github.com/torynet/gh-issue-dependency/issues/6
depends_on: [4]
parallel: true
conflicts_with: []
---

# Task: Implement GitHub repository context detection

## Description
Implement repository context detection using `gh repo view --json` and GitHub URL parsing following gh-sub-issue patterns. Handle current repository detection, --repo flag override, and cross-repository operations.

## Acceptance Criteria
- [ ] pkg/github.go created with repository context utilities
- [ ] Current repository detection using `gh repo view --json owner,name`
- [ ] GitHub URL parsing for issue references (github.com/owner/repo/issues/123)
- [ ] --repo flag validation and repository format checking (OWNER/REPO)
- [ ] Repository access validation and permission checking
- [ ] Works from any subdirectory within a repository
- [ ] Graceful handling when no repository context available
- [ ] Cross-repository operation support

## Technical Details
- **Implementation approach**: Replicate gh-sub-issue repository detection exactly
- **Key considerations**: URL parsing, permission validation, context resolution
- **Code locations**: pkg/github.go, integration with existing commands

Key functions to implement:
```go
func GetCurrentRepo() (owner, repo string, err error)
func ParseRepoFlag(repoFlag string) (owner, repo string, err error)  
func ParseIssueURL(url string) (owner, repo string, issueNumber int, err error)
func ValidateRepoAccess(owner, repo string) error
```

Repository detection priority:
1. --repo flag (if provided)
2. Issue URL parsing (if issue is URL)
3. Current repository detection via `gh repo view`
4. Error if no context available

## Dependencies
- [ ] Task 003 completed (command structure exists)
- [ ] GitHub CLI (gh) available for repository detection
- [ ] Understanding of gh-sub-issue repository handling

## Effort Estimate
- Size: M
- Hours: 2-3 hours
- Parallel: true (can work alongside error handling)

## Definition of Done
- [ ] Repository detection works from any directory in a GitHub repository
- [ ] --repo flag overrides automatic detection correctly
- [ ] GitHub URLs are parsed correctly for cross-repository operations
- [ ] Repository access is validated before operations
- [ ] Clear error messages when repository context cannot be determined
- [ ] Code follows gh-sub-issue repository handling patterns
- [ ] Integration with command structure handles all repository scenarios
