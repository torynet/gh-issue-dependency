---
name: Add enhanced features for state filtering and cross-repository support
status: open
created: 2025-09-06T21:20:36Z
updated: 2025-09-06T21:30:59Z
github: https://github.com/torynet/gh-issue-dependency/issues/13
depends_on: [12]
parallel: true
conflicts_with: []
---

# Task: Add enhanced features for state filtering and cross-repository support

## Description
Implement advanced features including state filtering (--state open|closed|all), enhanced cross-repository dependency display with proper context, and comprehensive empty state handling with helpful user guidance.

## Acceptance Criteria
- [ ] State filtering with --state flag supporting open, closed, and all options
- [ ] Cross-repository dependencies display repository information clearly
- [ ] Enhanced empty state messages with context-specific guidance
- [ ] Repository URLs provided for easy navigation to dependency issues
- [ ] Filtering logic applied efficiently without additional API calls
- [ ] Clear indication when dependencies are filtered vs. none exist
- [ ] Integration with existing output formatting modes

## Technical Details
- **Implementation approach**: Extend existing output formatting with filtering and context
- **Key considerations**: Client-side filtering, repository context display, user guidance
- **Code locations**: Extend pkg/output.go and cmd/list.go

State filtering implementation:
```go
func filterByState(dependencies []DependencyRelation, state string) []DependencyRelation {
    if state == "all" {
        return dependencies
    }
    
    filtered := []DependencyRelation{}
    for _, dep := range dependencies {
        if dep.Issue.State == state {
            filtered = append(filtered, dep)
        }
    }
    return filtered
}
```

Cross-repository display example:
```text
BLOCKED BY (1 issue)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”µ #45   Database migration setup     [open]   @alice
         torynet/shared-infra

BLOCKS (2 issues)  
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”µ #124  Frontend login component    [open]   @bob
         torynet/frontend-app
ðŸ”µ #125  API documentation update    [open]   @docs  
         torynet/api-docs
```

Enhanced empty states:
```text
# No dependencies
No dependencies found for issue #123.

# Filtered out
No open dependencies found for issue #123. 
Use --state all to see closed dependencies.

# Cross-repo access issue
No dependencies found for issue #123.
Note: Some dependencies may exist in repositories you don't have access to.
```

## Dependencies
- [ ] Task 003 completed (output formatting exists)
- [ ] State filtering flag implemented in task 001
- [ ] Cross-repository data available from API integration

## Effort Estimate
- Size: S
- Hours: 1-2 hours
- Parallel: true (can work alongside testing)

## Definition of Done
- [ ] --state open|closed|all filtering works correctly
- [ ] Cross-repository dependencies show repository context clearly
- [ ] Empty states provide helpful, context-aware messages
- [ ] Repository URLs enable easy navigation to dependencies
- [ ] All filtering preserves output format consistency
- [ ] Enhanced features work across TTY, plain text, and JSON modes
- [ ] User experience is intuitive and informative
