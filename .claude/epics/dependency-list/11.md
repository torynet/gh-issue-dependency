---
name: Implement GitHub API integration for dependency data retrieval
status: open
created: 2025-09-06T21:20:36Z
updated: 2025-09-06T21:30:58Z
github: https://github.com/torynet/gh-issue-dependency/issues/11
depends_on: [10]
parallel: false
conflicts_with: []
---

# Task: Implement GitHub API integration for dependency data retrieval

## Description
Implement GitHub API integration to fetch issue dependency data using the native GitHub issue dependencies API. This includes both "blocked by" and "blocks" relationships, along with issue details for display formatting.

## Acceptance Criteria
- [ ] GitHub API client setup using go-gh/v2 library
- [ ] Parallel API calls for blocked_by and blocking relationship endpoints
- [ ] Issue details fetching for titles, states, assignees, and labels
- [ ] Repository context handling for cross-repository dependencies
- [ ] Error handling for authentication, permissions, and rate limiting
- [ ] Data model structures for dependency relationships
- [ ] Integration with repository context detection from cli-foundation

## Technical Details
- **Implementation approach**: Use GitHub's native issue dependencies API via go-gh/v2
- **Key considerations**: Parallel API calls, error handling, data structure design
- **Code locations**: pkg/github.go (or similar), integration with cmd/list.go

API endpoints to integrate:
```
GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocked_by
GET /repos/{owner}/{repo}/issues/{issue_number}/dependencies/blocking
GET /repos/{owner}/{repo}/issues/{issue_number} (for issue details)
```

Data structures to implement:
```go
type DependencyRelation struct {
    Issue       Issue  `json:"issue"`
    Type        string `json:"type"` // "blocked_by" or "blocks"
    Repository  string `json:"repository"`
}

type Issue struct {
    Number    int      `json:"number"`
    Title     string   `json:"title"`
    State     string   `json:"state"`
    Assignees []User   `json:"assignees"`
    Labels    []Label  `json:"labels"`
    HTMLURL   string   `json:"html_url"`
}
```

Key functions to implement:
```go
func fetchDependencies(ctx context.Context, owner, repo string, issueNumber int) (*DependencyData, error)
func fetchIssueDetails(ctx context.Context, owner, repo string, issueNumber int) (*Issue, error)
```

## Dependencies
- [ ] Task 001 completed (command structure exists)
- [ ] go-gh/v2 library available in go.mod
- [ ] GitHub CLI authentication configured
- [ ] Repository context detection from cli-foundation

## Effort Estimate
- Size: L
- Hours: 3-4 hours
- Parallel: false (blocks output formatting)

## Definition of Done
- [ ] API integration fetches dependency relationships successfully
- [ ] Issue details are retrieved with all required fields
- [ ] Parallel API calls optimize performance
- [ ] Error handling covers authentication, permissions, rate limits
- [ ] Cross-repository dependencies are supported
- [ ] Data structures properly model GitHub API responses
- [ ] Integration tests work with real GitHub repositories
