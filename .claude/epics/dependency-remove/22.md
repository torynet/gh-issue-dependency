---
name: Implement remove command structure with argument and flag parsing
status: open
created: 2025-09-06T22:11:58Z
updated: 2025-09-06T22:20:27Z
github: https://github.com/torynet/gh-issue-dependency/issues/22
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Implement remove command structure with argument and flag parsing

## Description
Create the foundational structure for the `remove` command within the gh-issue-dependency CLI tool. This includes implementing the Cobra command framework, argument parsing for issue numbers/URLs, flag parsing for --blocked-by/--blocks relationships, and basic input validation following gh-sub-issue patterns.

## Acceptance Criteria
- [ ] Cobra command structure implemented in cmd/remove.go
- [ ] Argument parsing supports issue numbers and GitHub URLs
- [ ] Flag parsing with mutual exclusion for --blocked-by and --blocks
- [ ] Basic input validation for issue formats and repository context
- [ ] --dry-run and --force flags implemented
- [ ] Integration with existing repository context detection
- [ ] Command help text and usage examples
- [ ] Error handling for invalid inputs and missing arguments

## Technical Details
- **Implementation approach**: Create cmd/remove.go following gh-sub-issue command patterns with Cobra framework
- **Key considerations**: Input validation, flag mutual exclusion, repository context resolution
- **Code locations**: cmd/remove.go, integration with existing cmd/root.go

Command signature to implement:
```bash
gh issue-dependency remove <source-issue> --blocked-by <target-issue>
gh issue-dependency remove <source-issue> --blocks <target-issue>
gh issue-dependency remove <source-issue> --blocked-by <target-issue> --dry-run
gh issue-dependency remove <source-issue> --blocks <target-issue> --force
```

Key implementation components:
```go
var removeCmd = &cobra.Command{
    Use:   "remove <issue-number>",
    Short: "Remove dependency relationships between GitHub issues",
    Long:  `Remove "blocks" or "blocked-by" relationships between GitHub issues with validation and confirmation.`,
    Args:  cobra.ExactArgs(1),
    RunE:  runRemove,
}

func runRemove(cmd *cobra.Command, args []string) error {
    // Parse source issue
    sourceIssue, err := parseIssueRef(args[0])
    if err != nil {
        return fmt.Errorf("invalid source issue: %w", err)
    }
    
    // Validate flag mutual exclusion
    if err := validateRemoveFlags(cmd); err != nil {
        return err
    }
    
    // Get target issue from appropriate flag
    targetIssue, relType, err := parseRemoveTarget(cmd)
    if err != nil {
        return err
    }
    
    // Execute removal logic (placeholder for next tasks)
    return executeRemoval(sourceIssue, targetIssue, relType, getRemoveOptions(cmd))
}
```

## Dependencies
- [ ] cli-foundation epic completed (command framework and utilities)
- [ ] Cobra CLI framework available in go.mod
- [ ] Understanding of gh-sub-issue command patterns

## Effort Estimate
- Size: S
- Hours: 1-2 hours
- Parallel: false (foundational for other tasks)

## Definition of Done
- [ ] Command structure implemented and registered
- [ ] All argument and flag parsing works correctly
- [ ] Input validation prevents invalid usage
- [ ] Flag mutual exclusion enforced (--blocked-by OR --blocks, not both)
- [ ] Repository context detection integrated
- [ ] Help text and usage examples complete
- [ ] Basic error handling for malformed inputs
- [ ] Command can be invoked without crashing (even if removal logic not implemented)